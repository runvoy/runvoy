# AI Coding Assistant Rules for runvoy

# Used by: Cursor, Claude Code, and other AI assistants that respect .cursorrules

## Documentation Standards

### Primary Documentation Files

- **README.md** - User-facing documentation (installation, usage, examples)
- **docs/ARCHITECTURE.md** - Technical documentation (system design, implementation details)

### Documentation Update Policy

**CRITICAL**: don't jump into full blown implementations, keep changes small and easy to review

**CRITICAL: When making ANY code changes, you MUST update docs/ARCHITECTURE.md if:**

- Adding/removing commands or features
- Changing API contracts or data structures
- Modifying configuration options
- Updating security model or IAM permissions
- Changing execution flow or architecture
- Adding/removing dependencies
- Updating cost implications
- Fixing bugs that affect documented behavior

**After implementing changes:**

1. Update docs/ARCHITECTURE.md with new behavior
2. Update code references if line numbers changed significantly
3. Update README.md if user-facing behavior changed
4. Keep both docs consistent and in sync

### CLI Command Documentation Automation

**CRITICAL: When adding, removing, or modifying CLI commands:**

1. **README.md is automatically updated** - The README contains a section between `<!-- CLI_HELP_START -->` and `<!-- CLI_HELP_END -->` markers that is automatically populated with the latest CLI help output.

2. **Automatic updates via pre-commit hook** - A pre-commit hook (`scripts/update-readme-help.go`) automatically updates the README when CLI commands change. The hook runs when:
   - Files in `cmd/runvoy/` are modified
   - The update script itself is modified
   - `README.md` is modified

3. **Manual update** - To manually update the README with latest CLI help:

   ```bash
   just update-readme-help
   ```

   Or run directly:

   ```bash
   go run scripts/update-readme-help.go
   ```

4. **Keep examples current** - If you add/remove/modify commands:
   - The help output in README is automatically updated via the hook
   - Update the "Common Commands Examples" section in README.md if the command is commonly used
   - Ensure examples still work with the new command structure

5. **Don't over comment code, only comment when it's not obvious what the code is doing**
   - By default add more details in e.g. the function signature and/or parameter descriptions, etc.
   - The code should be self-explanatory, so only comment when it's not obvious what the code is doing.

6. **How it works**:
   - The script builds the CLI (`just build-cli`)
   - Captures `./bin/runvoy --help` output
   - Injects it into the README between the marker comments
   - The pre-commit hook ensures this happens automatically before commits

7. **Keep Git commit messages concise and descriptive**
   - Use the present tense
   - Keep it short and to the point
   - Wrap the commit message at 72 characters
   - Use the imperative mood
   - Use the Git commit message format:
     - feat: add new feature
     - fix: fix bug
     - chore: update documentation
     - refactor: refactor code

**Note:** The README section between `<!-- CLI_HELP_START -->` and `<!-- CLI_HELP_END -->` is automatically generated. DO NOT edit it manually - run `just update-readme-help` to regenerate it.
